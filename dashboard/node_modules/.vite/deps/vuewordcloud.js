import {
  h
} from "./chunk-QO6ZHO7P.js";
import "./chunk-J43GMYXM.js";

// node_modules/vuewordcloud/index.js
function n(t) {
  return "function" == typeof t;
}
function r() {
}
var i = function(t) {
  this.previousValue = t, this.interrupted = false, this.interruptHandlers = /* @__PURE__ */ new Set();
};
i.prototype.throwIfInterrupted = function() {
  if (this.interrupted)
    throw new Error();
}, i.prototype.interrupt = function() {
  this.interrupted || (this.interrupted = true, this.interruptHandlers.forEach(function(t) {
    try {
      t();
    } catch (t2) {
    }
  }));
}, i.prototype.onInterrupt = function(t) {
  if (this.interrupted && !this.interruptHandlers.has(t))
    try {
      t();
    } catch (t2) {
    }
  this.interruptHandlers.add(t);
};
function e(t) {
  return function() {
    return t;
  };
}
function o() {
  return [];
}
var u = { animationDuration: { type: Number, default: 1e3 }, animationEasing: { type: String, default: "ease" }, animationOverlap: { type: Number, default: 1 }, color: { type: [String, Function], default: "Black" }, createCanvas: { type: Function, default: function() {
  return document.createElement("canvas");
} }, createWorker: { type: Function, default: function(t) {
  return new Worker(URL.createObjectURL(new Blob([t])));
} }, enterAnimation: { type: [Object, String], default: e({ opacity: 0 }) }, fontFamily: { type: [String, Function], default: "serif" }, fontSizeRatio: { type: Number, default: 0 }, fontStyle: { type: [String, Function], default: "normal" }, fontVariant: { type: [String, Function], default: "normal" }, fontWeight: { type: [String, Function], default: "normal" }, leaveAnimation: { type: [Object, String], default: e({ opacity: 0 }) }, loadFont: { type: Function, default: function(t, n2, r2, i2) {
  return document.fonts.load([n2, r2, "1px", t].join(" "), i2);
} }, rotation: { type: [Number, Function], default: 0 }, rotationUnit: { type: [String, Function], default: "turn" }, spacing: { type: Number, default: 0 }, text: { type: [String, Function], default: "" }, weight: { type: [Number, Function], default: 1 }, words: { type: Array, default: o } };
var a = e(null);
function f(t) {
  if (t) {
    var n2 = typeof t;
    return "object" === n2 || "function" === n2;
  }
  return false;
}
function s(t) {
  return "string" == typeof t;
}
var c = { animationOptions: function() {
  var t, n2, r2, i2 = this.animationDuration, e2 = this.enterAnimation, o2 = this.leaveAnimation;
  if (f(e2) && f(o2)) {
    var u2 = (t = Object.assign({}, e2, o2), n2 = a, r2 = {}, Object.entries(t).forEach(function(i3) {
      var e3 = i3[0], o3 = i3[1];
      r2[e3] = n2(o3, e3, t);
    }), r2), c2 = function(t2) {
      Object.assign(t2.style, e2);
    }, h3 = function(t2, n3) {
      setTimeout(function() {
        Object.assign(t2.style, u2), setTimeout(n3, i2);
      }, 1);
    };
    return { props: { css: false }, on: { beforeAppear: c2, appear: h3, beforeEnter: c2, enter: h3, leave: function(t2, n3) {
      Object.assign(t2.style, o2), setTimeout(n3, i2);
    } } };
  }
  return s(e2) && s(o2) ? { props: { duration: i2, appear: true, appearActiveClass: e2, enterActiveClass: e2, leaveActiveClass: o2 } } : {};
}, normalizedAnimationOverlap: function() {
  var t = this.animationOverlap;
  return (t = Math.abs(t)) < 1 && (t = 1 / t), t;
}, separateAnimationDelay: function() {
  var t = this.cloudWords;
  if (t.length > 1) {
    return (this.animationDuration - this.separateAnimationDuration) / (t.length - 1);
  }
  return 0;
}, separateAnimationDuration: function() {
  var t = this.cloudWords;
  if (t.length > 0) {
    var n2 = this.animationDuration, r2 = this.normalizedAnimationOverlap;
    return n2 / Math.min(r2, t.length);
  }
  return 0;
} };
var h2 = Array.isArray;
function l(t) {
  return n(t) ? t : e(t);
}
var v = 2 * Math.PI;
var d = v / 360;
function m(t) {
  return void 0 === t;
}
function p(t, n2) {
  return t.postMessage(n2), function(t2) {
    return new Promise(function(n3, r2) {
      var i2, e2 = function(t3) {
        var r3 = t3.data;
        i2(), n3(r3);
      }, o2 = function(t3) {
        var n4 = t3.error;
        i2(), r2(n4);
      };
      i2 = function() {
        t2.removeEventListener("message", e2), t2.removeEventListener("error", o2);
      }, t2.addEventListener("message", e2), t2.addEventListener("error", o2);
    });
  }(t);
}
function g(t, n2, r2) {
  return Math.ceil(t * Math.abs(Math.sin(r2)) + n2 * Math.abs(Math.cos(r2)));
}
function b(t, n2, r2) {
  return Math.ceil(t * Math.abs(Math.cos(r2)) + n2 * Math.abs(Math.sin(r2)));
}
function y(t, n2, r2, i2, e2) {
  return [t, n2, r2, i2 + "px", e2].join(" ");
}
function M(t, n2) {
  return Math.ceil(t / n2) * n2;
}
function w(t, n2, r2) {
  var i2 = r2().getContext("2d");
  return i2.font = n2, i2.measureText(t).width;
}
var x = function(t, n2, r2, i2, e2, o2, u2) {
  this.t = t, this.i = n2, this.o = r2, this.u = i2, this.s = e2, this.h = o2, this.l = u2, this.v = 1, this.m = 0, this.p = 0, this.g = 0;
};
var S = { M: { configurable: true }, S: { configurable: true }, F: { configurable: true }, j: { configurable: true }, O: { configurable: true }, W: { configurable: true }, A: { configurable: true }, B: { configurable: true }, C: { configurable: true }, L: { configurable: true }, _: { configurable: true }, P: { configurable: true }, T: { configurable: true }, N: { configurable: true }, k: { configurable: true }, D: { configurable: true }, H: { configurable: true }, R: { configurable: true }, U: { configurable: true } };
S.M.get = function() {
  return this.v;
}, S.M.set = function(t) {
  this.v !== t && (this.v = t, this.V = void 0);
}, S.S.get = function() {
  return y(this.h, this.s, this.u, this.M, this.o);
}, S.F.get = function() {
  return void 0 === this.q && (this.q = w(this.t, y(this.h, this.s, this.u, 1, this.o), this.l)), this.q;
}, S.j.get = function() {
  return this.F * this.M;
}, S.O.get = function() {
  return this.p * this.M;
}, S.O.set = function(t) {
  this.p = t / this.M;
}, S.W.get = function() {
  return this.g * this.M;
}, S.W.set = function(t) {
  this.g = t / this.M;
}, S.A.get = function() {
  return b(this.j, this.M, this.i);
}, S.B.get = function() {
  return g(this.j, this.M, this.i);
}, S.C.get = function() {
  return this.O - this.A / 2;
}, S.L.get = function() {
  return this.W - this.B / 2;
}, S._.get = function() {
  return this.m;
}, S._.set = function(t) {
  this.m !== t && (this.m = t, this.V = void 0);
}, S.P.get = function() {
  return void 0 === this.V && (this.V = function(t, n2, r2, i2, e2, o2, u2, a2, f2) {
    var s2 = y(n2, r2, i2, e2 *= 4, o2), c2 = u2 * e2 * 2, h3 = c2 + w(t, s2, f2), l2 = c2 + e2, v2 = f2(), d2 = v2.getContext("2d"), m2 = M(b(h3, l2, a2), 4), p2 = M(g(h3, l2, a2), 4);
    v2.width = m2, v2.height = p2, d2.translate(m2 / 2, p2 / 2), d2.rotate(a2), d2.font = s2, d2.textAlign = "center", d2.textBaseline = "middle", d2.fillText(t, 0, 0), c2 > 0 && (d2.miterLimit = 1, d2.lineWidth = c2, d2.strokeText(t, 0, 0));
    for (var x2 = d2.getImageData(0, 0, m2, p2).data, S2 = [], F2 = 1 / 0, j2 = 0, O2 = 1 / 0, E = 0, W = m2 / 4, A = p2 / 4, B = 0; B < W; ++B)
      for (var C = 0; C < A; ++C)
        t:
          for (var L = 0; L < 4; ++L)
            for (var _ = 0; _ < 4; ++_) {
              if (x2[4 * (m2 * (4 * C + _) + (4 * B + L)) + 3]) {
                S2.push([B, C]), F2 = Math.min(B, F2), j2 = Math.max(B + 1, j2), O2 = Math.min(C, O2), E = Math.max(C + 1, E);
                break t;
              }
            }
    return S2.length > 0 ? [S2.map(function(t2) {
      var n3 = t2[0], r3 = t2[1];
      return [n3 - F2, r3 - O2];
    }), j2 - F2, E - O2, Math.ceil(W / 2) - F2, Math.ceil(A / 2) - O2] : [S2, 0, 0, 0, 0];
  }(this.t, this.h, this.s, this.u, this.M, this.o, this._, this.i, this.l)), this.V;
}, S.T.get = function() {
  return this.P[0];
}, S.N.get = function() {
  return this.P[1];
}, S.k.get = function() {
  return this.P[2];
}, S.D.get = function() {
  return this.P[3];
}, S.H.get = function() {
  return this.P[4];
}, S.R.get = function() {
  return Math.ceil(this.O) - this.D;
}, S.R.set = function(t) {
  this.O = t + this.D;
}, S.U.get = function() {
  return Math.ceil(this.W) - this.H;
}, S.U.set = function(t) {
  this.W = t + this.H;
}, Object.defineProperties(x.prototype, S);
var F = { cloudWords: function(t) {
  this.$emit("update:cloudWords", t);
}, progress: { handler: function(t) {
  this.$emit("update:progress", t);
}, deep: true, immediate: true } };
var j = { updateElementSize: function() {
  var t = this.$el;
  t && (this.elementWidth = t.offsetWidth, this.elementHeight = t.offsetHeight);
} };
var O = { name: "VueWordCloud", mixins: [function(t) {
  return { data: function() {
    var n2 = {};
    return Object.keys(t).forEach(function(t2) {
      n2["asyncComputed_trigger_" + t2] = {};
    }), n2;
  }, computed: {}, beforeCreate: function() {
    var e2 = this, o2 = /* @__PURE__ */ new Set();
    Object.entries(t).forEach(function(t2) {
      var u2 = t2[0], a2 = t2[1], f2 = a2.get, s2 = a2.default, c2 = a2.errorHandler;
      void 0 === c2 && (c2 = r);
      var h3, l2 = true;
      e2.$options.computed[u2] = function() {
        return this["asyncComputed_trigger_" + u2], this["asyncComputed_promise_" + u2], s2;
      }, e2.$options.computed["asyncComputed_promise_" + u2] = function() {
        var t3 = this;
        h3 && (h3.interrupt(), o2.delete(h3)), l2 && (l2 = false, n(s2) && (s2 = s2.call(this)));
        var r2 = new i(s2);
        h3 = r2, o2.add(h3), new Promise(function(n2) {
          n2(f2.call(t3, r2));
        }).then(function(n2) {
          r2.throwIfInterrupted(), s2 = n2, t3["asyncComputed_trigger_" + u2] = {};
        }).catch(c2);
      };
    });
  } };
}({ cloudWords: { get: function(t) {
  var n2, i2 = this, e2 = this, o2 = e2.elementWidth, u2 = e2.elementHeight, a2 = e2.words, c2 = e2.text, g2 = e2.weight, b2 = e2.rotation, y2 = e2.rotationUnit, M2 = e2.fontFamily, w2 = e2.fontWeight, S2 = e2.fontVariant, F2 = e2.fontStyle, j2 = e2.color, O2 = e2.spacing, E = e2.fontSizeRatio, W = e2.createCanvas, A = e2.loadFont, B = e2.createWorker;
  n2 = E, E = (n2 = Math.abs(n2)) > 1 ? 1 / n2 : n2;
  var C = function(t2) {
    var n3 = t2[0], r2 = t2[1];
    return n3 > r2 ? [1, r2 / n3] : r2 > n3 ? [n3 / r2, 1] : [1, 1];
  }([o2, u2]);
  if (o2 > 0 && u2 > 0) {
    var L = l(c2), _ = l(g2), P = l(b2), T = l(y2), N = l(M2), k = l(w2), z = l(S2), D = l(F2), H = l(j2);
    return a2 = a2.map(function(t2, n3) {
      var r2, i3, e3, o3, u3, c3, l2, p2, g3, b3, y3;
      t2 && (s(t2) ? e3 = t2 : h2(t2) ? (e3 = (r2 = t2)[0], o3 = r2[1]) : f(t2) && (e3 = (i3 = t2).text, o3 = i3.weight, u3 = i3.rotation, c3 = i3.rotationUnit, l2 = i3.fontFamily, p2 = i3.fontWeight, g3 = i3.fontVariant, b3 = i3.fontStyle, y3 = i3.color)), m(e3) && (e3 = L(t2, n3, a2)), m(o3) && (o3 = _(t2, n3, a2)), m(u3) && (u3 = P(t2, n3, a2)), m(c3) && (c3 = T(t2, n3, a2)), m(l2) && (l2 = N(t2, n3, a2)), m(p2) && (p2 = k(t2, n3, a2)), m(g3) && (g3 = z(t2, n3, a2)), m(b3) && (b3 = D(t2, n3, a2)), m(y3) && (y3 = H(t2, n3, a2));
      var M3 = new x(e3, function() {
        switch (c3) {
          case "turn":
            return u3 * v;
          case "deg":
            return function(t3) {
              return t3 * d;
            }(u3);
        }
        return u3;
      }(), l2, p2, g3, b3, W);
      return Object.assign(M3, { J: t2, G: o3, I: y3 }), M3;
    }), Promise.resolve().then(function() {
      return Promise.all(a2.map(function(t2) {
        var n3 = t2.o, r2 = t2.h, i3 = t2.u, e3 = t2.t;
        return A(n3, r2, i3, e3);
      }));
    }).catch(r).then(function() {
      if ((a2 = a2.filter(function(t2) {
        return t2.j > 0;
      }).sort(function(t2, n4) {
        return n4.G - t2.G;
      })).length > 0) {
        var n3 = a2[0], r2 = function(t2) {
          return t2[n4 = t2, n4.length - 1];
          var n4;
        }(a2), e3 = n3.G, f2 = r2.G;
        if (f2 < e3) {
          var s2 = E > 0 ? 1 / E : f2 > 0 ? e3 / f2 : e3 < 0 ? f2 / e3 : 1 + e3 - f2;
          a2.forEach(function(t2) {
            var n4, r3, i3;
            t2.M = (n4 = t2.G, (i3 = 1) + (n4 - (r3 = f2)) * (s2 - i3) / (e3 - r3));
          });
        }
        a2.reduceRight(function(t2, n4) {
          return n4.M < 2 * t2 ? n4.M /= t2 : (t2 = n4.M, n4.M = 1), n4.K = t2;
        }, 1), a2.forEach(function(t2) {
          t2.M *= 4;
        });
        var c3 = B('!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();\n'), h3 = { completedWords: 0, totalWords: a2.length };
        return Promise.resolve().then(function() {
          return t.throwIfInterrupted(), i2.progress = h3, p(c3, C);
        }).then(function() {
          t.throwIfInterrupted(), h3.completedWords++;
          var n4 = Promise.resolve();
          return a2.reduce(function(r3, i3, e4) {
            return n4 = n4.then(function() {
              return i3.K < r3.K ? Promise.resolve().then(function() {
                return p(c3, { name: "clear" });
              }).then(function() {
                var t2 = Promise.resolve(), n5 = r3.K / i3.K;
                return a2.slice(0, e4).forEach(function(r4) {
                  t2 = t2.then(function() {
                    return r4.M *= n5, p(c3, { name: "put", args: [r4.T, r4.R, r4.U] });
                  });
                }), t2;
              }) : p(c3, { name: "put", args: [r3.T, r3.R, r3.U] });
            }).then(function() {
              return i3._ = O2, p(c3, { name: "findFit", args: [i3.T, i3.R, i3.U] });
            }).then(function(n5) {
              var r4 = n5[0], e5 = n5[1];
              t.throwIfInterrupted(), h3.completedWords++, i3.R = r4, i3.U = e5, i3._ = 0;
            }), i3;
          }), n4;
        }).then(function() {
          return p(c3, { name: "put", args: [r2.T, r2.R, r2.U] });
        }).then(function() {
          return p(c3, { name: "getBounds" });
        }).then(function(t2) {
          var n4 = t2.left, r3 = t2.top, i3 = t2.width, e4 = t2.height;
          if (i3 > 0 && e4 > 0) {
            var f3 = Math.min(o2 / i3, u2 / e4);
            a2.forEach(function(t3) {
              t3.O -= n4, t3.W -= r3, t3.M *= f3;
            });
          }
          var s3 = /* @__PURE__ */ new Set();
          return a2.map(function(t3) {
            for (var n5 = t3.J, r4 = t3.t, i4 = t3.G, e5 = t3.i, o3 = t3.o, u3 = t3.u, a3 = t3.s, f4 = t3.h, c4 = t3.S, h4 = t3.O, l2 = t3.W, v2 = t3.I, d2 = JSON.stringify([r4, o3, u3, a3, f4]); s3.has(d2); )
              d2 += "!";
            return s3.add(d2), { key: d2, word: n5, text: r4, weight: i4, rotation: e5, font: c4, color: v2, left: h4, top: l2 };
          });
        }).finally(function() {
          c3.terminate();
        }).finally(function() {
          t.throwIfInterrupted(), i2.progress = null;
        });
      }
      return [];
    });
  }
  return [];
}, default: o } })], props: u, data: function() {
  return { elementWidth: 0, elementHeight: 0, progress: null };
}, computed: c, watch: F, mounted: function() {
  var t, n2, r2 = this;
  t = function() {
    if (r2._isDestroyed)
      return false;
    r2.updateElementSize();
  }, n2 = 1e3, function(t2) {
    var n3 = function() {
      for (var r3 = [], i2 = arguments.length; i2--; )
        r3[i2] = arguments[i2];
      return t2.call.apply(t2, [this, n3].concat(r3));
    };
    return n3;
  }(function(r3) {
    requestAnimationFrame(function() {
      false !== t() && setTimeout(r3, n2);
    });
  })();
}, methods: j, render: function() {
  var n2 = this.$slots, r2 = this.animationEasing, i2 = this.animationOptions, e2 = this.cloudWords, o2 = this.separateAnimationDelay, u2 = this.separateAnimationDuration;
  return n2 = Object.assign({}, { default: function(t) {
    return t.text;
  } }, n2), h("div", { style: { height: "100%", position: "relative", width: "100%" } }, [h("div", { style: { bottom: "50%", position: "absolute", right: "50%", transform: "translate(50%,50%)" } }, e2.map(function(e3, a2) {
    var f2 = e3.color, s2 = e3.font, c2 = e3.left, h3 = e3.rotation, l2 = e3.text, v2 = e3.top, d2 = e3.weight, m2 = e3.word;
    return h("transition", Object.assign({}, i2), [h("div", { key: a2, style: Object.assign({}, { left: c2 + "px", position: "absolute", top: v2 + "px" }, u2 > 0 ? { animation: [u2 + "ms", r2, o2 * a2 + "ms"].join(" "), transition: ["all", u2 + "ms", r2, o2 * a2 + "ms"].join(" ") } : {}) }, [h("div", { style: Object.assign({}, { bottom: "50%", color: f2, font: s2, position: "absolute", right: "50%", transform: ["translate(50%,50%)", "rotate(" + h3 + "rad)"].join(" "), whiteSpace: "nowrap" }, u2 > 0 ? { transition: ["all", u2 + "ms", r2, o2 * a2 + "ms"].join(" ") } : {}) }, [n2.default({ color: f2, font: s2, left: c2, text: l2, top: v2, weight: d2, word: m2 })])])]);
  }))]);
} };
export {
  O as default
};
//# sourceMappingURL=vuewordcloud.js.map
